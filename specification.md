Написать проект на FastAPI с использованием PostgreSQL в качестве БД. В проекте следует реализовать REST API по работе с меню ресторана, все CRUD операции. Для проверки задания, к презентаций будет приложена Postman коллекция с тестами. Задание выполнено, если все тесты проходят успешно.

Даны 3 сущности: Меню, Подменю, Блюдо.

Зависимости:
- у меню есть подменю, которые к ней привязаны;
- у подменю есть блюда.

Условия:
- блюдо не может быть привязано напрямую к меню, минуя подменю;
- блюдо не может находиться в 2-х подменю одновременно;
- подменю не может находиться в 2-х меню одновременно;
- если удалить меню, должны удалиться все подменю и блюда этого меню;
- если удалить подменю, должны удалиться все блюда этого подменю;
- цены блюд выводить с округлением до 2 знаков после запятой;
- во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню;
- во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю;
- во время запуска тестового сценария БД должна быть пуста.

Обернуть программные компоненты в контейнеры.

Контейнеры должны запускаться по одной команде “docker-compose up -d” или той которая описана вами в readme.md.

Образы для Docker:
(API) python:3.10-slim
(DB) postgres:15.1-alpine

1. Написать CRUD тесты для ранее разработанного API с помощью библиотеки pytest
2. Подготовить отдельный контейнер для запуска тестов. Команду для запуска указать в README.md
3. <sup>*</sup> Реализовать вывод количества подменю и блюд для Меню через один (сложный) ORM запрос.
4. <sup>**</sup> Реализовать тестовый сценарий «Проверка кол-ва блюд и подменю в меню» из Postman с помощью pytest.

    Требования:
   * Если FastAPI синхронное - тесты синхронные, Если асинхронное - тесты асинхронные

5. Вынести бизнес логику и запросы в БД в отдельные слои приложения.
6. Добавить кэширование запросов к API с использованием Redis. Не забыть про инвалидацию кэша.
7. Добавить pre-commit хуки в проект. Файл yaml будет прикреплен к ДЗ.
8. Покрыть проект type hints (тайпхинтами).
9. <sup>*</sup>Описать ручки API в соответствий c OpenAPI.
10. <sup>**</sup> Реализовать в тестах аналог Django reverse() для FastAPI.

    Требования:
    1. Код должен проходить все линтеры.
    2. Код должен соответствовать принципам SOLID, DRY, KISS.
    3. Проект должен запускаться по одной команде (докер).
    4. Проект должен проходить все Postman тесты (коллекция с Вебинара №1).
    5. Тесты написанные вами после Вебинара №2, должны быть актуальны, запускать и успешно проходить
    6. Контейнеры с проектом и с тестами запускаются разными командами.

11. Переписать текущее FastAPI приложение на асинхронное выполнение.
12. Добавить в проект фоновую задачу с помощью Celery + RabbitMQ.

    Задача: синхронизация Excel документа и БД.
    1. в проекте создаем папку admin;
    2. в эту папку кладем файл Menu.xlsx;
    3. При внесении изменений в файл все изменения должны отображаться в БД. Периодичность обновления 15 сек. Удалять БД при каждом обновлении – нельзя.

13. Добавить эндпоинт (GET) для вывода всех меню со всеми связанными подменю и со всеми связанными блюдами.
14. Реализовать инвалидация кэша в background task (встроено в FastAPI)
15. <sup>*</sup> Обновление меню из google sheets раз в 15 сек.
16. <sup>**</sup>Блюда по акции. Размер скидки (%) указывается в столбце G файла Menu.xlsx
    Требования:
    1. Данные меню, подменю, блюд для нового эндпоинта должны доставаться одним ORM-запросом в БД (использовать подзапросы и агрегирующие функций SQL).
    2. Проект должен запускаться одной командой
    3. Проект должен соответствовать требованиям всех предыдущих вебинаров. (Не забыть добавить тесты для нового API эндпоинта)
